<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
  <head>
    <title>Building a non-trivial app with Elm and with Svelte</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="A blogpost comparing the latest cutting edge frontend framework (Svelte), with the older but functionally pure Elm programming language" />
    
    <meta name="author" content="Flavio Corpa" />
     
    <meta name="keywords" content="frontend,svelte,elm,functional,programming" />
    
    <meta name="google-site-verification" content="QX4bn65yOXBfgnwxlO09yIBc1H8blur-Erx3lmsDVhU" />
    <meta
      http-equiv="origin-trial"
      content="Am4BZ0c7GMyB72dgo/Ny2FfIFscXhYMoN+CVe4jduWh24FvsaCwf7kjZzHzfrJXtIilyZVAEKRxOItGLY7lvkAgAAABSeyJvcmlnaW4iOiJodHRwczovL3JvYmVydHdwZWFyY2UuY29tOjQ0MyIsImZlYXR1cmUiOiJQb3J0YWxzIiwiZXhwaXJ5IjoxNjAzNTQ2NDc3fQ=="
    />

    <meta property="og:site_name" content="flaviocorpa.com" />
    <meta property="og:title" content="Building a non-trivial app with Elm and with Svelte" />
    <meta property="og:url" content="https://flaviocorpa.com/building-a-non-trivial-app-with-elm-and-with-svelte.html" />
    <meta property="og:description" content="A blogpost comparing the latest cutting edge frontend framework (Svelte), with the older but functionally pure Elm programming language" />
    
    <meta property="og:image" content="https://flaviocorpa.com./images/elm-vs-svelte.png" />
     
    <meta property="og:type" content="article" />
     
    <meta name="twitter:image" content="https://flaviocorpa.com./images/elm-vs-svelte.png" />
    <meta name="twitter:card" content="summary_large_image" />
    
    <meta name="twitter:url" content="https://flaviocorpa.com/building-a-non-trivial-app-with-elm-and-with-svelte.html" />
    <meta name="twitter:site" content="flaviocorpa.com" />
    <meta name="twitter:title" content="Building a non-trivial app with Elm and with Svelte" />
    <meta name="twitter:description" content="A blogpost comparing the latest cutting edge frontend framework (Svelte), with the older but functionally pure Elm programming language" />
    
    <meta name="twitter:creator" content="@FlavioCorpa" />
    
    <link
      rel="icon"
      href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü•∑üèª</text></svg>"
    />
    <link rel="canonical" href="https://flaviocorpa.com/building-a-non-trivial-app-with-elm-and-with-svelte.html" />

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style type="text/tailwindcss">
      /* Base resets */
      :root {
        color-scheme: light dark;
      }
      html {
        box-sizing: border-box;
      }
      *::before,
      *::after {
        box-sizing: inherit;
      }
      body {
        font-family: Verdana, Helvetica, Arial, sans-serif;
        margin: 0;
      }
      body,
      input,
      button {
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
      }
      input,
      button {
        font: inherit;
      }
      /* Tailwind v4 */
      @custom-variant dark (&:where(.dark, .dark *));

      /* Light/Dark CSS variables ported from CSS folder */
      body.light {
        --authorTitleColor: #767676;
        --bgColor: #fff;
        --blockquoteBorderColor: #eee;
        --btnBgColor: #287cb4;
        --btnTextColor: #fff;
        --iframeBorderColor: #e8e8e8;
        --inlineCodeBgColor: rgba(255, 229, 100, 0.2);
        --inlineCodeColor: #1a1a1a;
        --inputBgColor: #fff;
        --inputBorderColorFocus: #82aaff;
        --inputColor: #334249;
        --secretGraphicColor: #1a1a1a;
        --secretGraphicHoverColor: #206592;
        --separatorColor: #f2f2f2;
        --textColor: #334249;
        --textLinkBorderColor: #287cb4;
        --textLinkColor: #287cb4;
        --textLinkHoverColor: #206592;
        --deepBgColor: #011627;
        --footerBgColor: #f5f5f5;
        --footerLinkColor: #2676ac;
        --h1Color: currentColor;
        --headerBgColor: #c4dfff;
      }
      body.dark {
        --separatorColor: #424857;
        --authorTitleColor: hsla(0, 0%, 100%, 0.65);
        --bgColor: #282c35;
        --blockquoteBorderColor: var(--separatorColor);
        --btnBgColor: #001627;
        --btnTextColor: #fff;
        --iframeBorderColor: var(--separatorColor);
        --inlineCodeBgColor: rgba(115, 124, 153, 0.2);
        --inlineCodeColor: #e2e4e9;
        --inputBgColor: #282c35;
        --inputBorderColorFocus: #82aaff;
        --inputColor: #fff;
        --secretGraphicBorderLeftColor: #c693ea;
        --secretGraphicColor: hsla(0, 0%, 100%, 0.88);
        --secretGraphicHoverColor: rgba(255, 167, 196, 0.75);
        --textColor: hsla(0, 0%, 100%, 0.88);
        --textLinkBorderColor: #c693ea;
        --textLinkColor: #c693ea;
        --textLinkHoverColor: rgba(198, 147, 234, 0.8);
        --deepBgColor: #011627;
        --footerBgColor: #373c49;
        --footerLinkColor: #c693ea;
        --h1Color: var(--textColor);
        --headerBgColor: var(--deepBgColor);
      }

      /* Minimal base styles moved from CSS folder */
      a[href] {
        text-decoration: none;
        color: var(--textLinkColor);
        box-shadow: 0 1px 0 0 currentColor;
        word-wrap: break-word;
      }
      a[href]:hover,
      a[href]:focus,
      a[href]:visited {
        color: var(--textLinkHoverColor);
      }
      h1 > a[href],
      h1 > a[href]:hover,
      h1 > a[href]:focus,
      h1 > a[href]:visited {
        color: inherit;
      }
      h1,
      h2 {
        font-weight: 400;
        line-height: 1.2;
      }
      h2 {
        margin-bottom: 0.5em;
        font-size: 1.643rem;
      }
      h2::before {
        content: '';
        display: block;
        height: 0;
        border-top: 5px solid var(--separatorColor);
        padding-bottom: 20px;
      }
      a[href].footnote-ref {
        box-shadow: none;
      }
      img {
        display: block;
        height: auto;
        margin-left: auto;
        margin-right: auto;
        max-width: 100%;
        border: 0;
      }

      /* Theme switch icon visibility rules */
      [data-theme-switch][aria-checked='true'] [data-theme-switch-icon='dark'],
      [data-theme-switch][aria-checked='false'] [data-theme-switch-icon='light'] {
        display: block;
      }
      [data-theme-switch][aria-checked='true'] [data-theme-switch-icon='light'],
      [data-theme-switch][aria-checked='false'] [data-theme-switch-icon='dark'] {
        display: none;
      }

      /* Code font stack */
      code,
      kbd,
      pre,
      samp {
        font-family: JetBrains Mono, Consolas, Menlo, Monaco, source-code-pro, 'Courier New',
          monospace;
        font-size: 0.9em;
        -webkit-font-feature-settings: normal;
        font-feature-settings: normal;
      }
      pre code {
        font-size: inherit;
        line-height: 1.4rem;
      }
      .sourceCode:not(pre):not(code) {
        background-color: var(--deepBgColor);
        overflow: hidden;
        margin: 1.25rem 0;
        border-radius: 10px;
      }
      pre.sourceCode {
        width: 100%;
        overflow-x: auto;
        overflow-y: hidden;
        padding: 1.3125rem;
        margin: 0;
        color: #fff;
        background: none;
        font-size: 0.8rem;
        line-height: 1.4rem;
      }
      /* Optional line numbers support */
      pre.numberSource.sourceCode > code {
        counter-reset: source-line 0;
      }
      pre.numberSource.sourceCode > code > span {
        counter-increment: source-line;
      }
      pre.numberSource.sourceCode > code > span > a {
        box-shadow: none;
      }
      code.sourceCode > a.sourceLine:before {
        display: inline-block;
        content: attr(title);
        text-align: right;
        border-right: 1px solid rgba(128, 147, 147, 0.4);
        color: rgb(128, 147, 147);
        width: 30px;
        padding-right: 10px;
        margin-right: 10px;
      }
      @media (max-width: 667px) {
        .sourceCode:not(pre):not(code) {
          border-radius: 0;
        }
        code.sourceCode > a.sourceLine:before {
          display: none;
        }
      }
      :not(pre) > code {
        border-radius: 0.3em;
        background-color: var(--inlineCodeBgColor);
        color: var(--inlineCodeColor);
        padding: 0.15em 0.2em 0.05em;
        white-space: normal;
      }
      /* Syntax token colors (Pandoc/Highlight) */
      .co {
        color: rgb(128, 147, 147);
      }
      .ch,
      .st,
      .vs {
        color: rgb(236, 196, 141);
      }
      .va {
        color: rgb(214, 222, 235);
      }
      .dv,
      .bn,
      .fl {
        color: rgb(247, 140, 108);
      }
      .bu,
      .cn,
      .at,
      .fu,
      .dt {
        color: rgb(130, 170, 255);
      }
      .im,
      .op,
      .kw,
      .ot,
      .cf {
        color: #c693ea;
      }

      /* Typography & content spacing */
      article p {
        margin: 0;
        line-height: 1.75;
      }
      article p + p {
        margin-top: 1.75em;
      }
      h2 {
        margin-bottom: 0.5em;
        margin-block-start: 0.83em;
        margin-block-end: 0.83em;
        font-size: 1.643rem;
        font-weight: 400;
        line-height: 1.2;
      }
      hr {
        height: 0;
        border: none;
        border-top: 5px solid var(--separatorColor);
        margin: 1.75em 0;
      }
      blockquote {
        margin-left: 1.5em;
        margin-top: 1em;
        margin-bottom: 1em;
        padding-left: 1em;
        border-left: 4px solid var(--blockquoteBorderColor);
      }
      blockquote em {
        font-size: 1.286rem;
      }
      /* Lists */
      article ul {
        margin: 1em 0;
        padding-left: 1.5em;
        list-style: disc outside;
      }
      article ol {
        margin: 1em 0;
        padding-left: 1.5em;
        list-style: decimal outside;
      }
      article li {
        margin: 0.25em 0;
      }
      article li > ul,
      article li > ol {
        margin: 0.5em 0;
      }
      /* Media helpers */
      iframe {
        width: 100%;
      }
      .iframe--example {
        border: 2px solid var(--iframeBorderColor);
      }
      .pdf {
        margin: 1rem -6rem;
        height: 30rem;
        width: calc(100% + 12rem);
      }
      .pdf-link {
        display: none;
      }
      @media (max-width: 800px) {
        .pdf {
          margin: 1rem 0;
          width: 100%;
        }
      }
      @media (max-width: 667px) {
        .pdf {
          display: none;
        }
        .pdf-link {
          display: inline;
        }
      }
    </style>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap"
      rel="stylesheet"
    />
  </head>
  <body
    class="dark min-h-dvh flex flex-col bg-[var(--bgColor)] text-[var(--textColor)] leading-[1.643] antialiased"
  >
    <script>
      ;(() => {
        window.site = {
          theme:
            localStorage.getItem('theme') ||
            (matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light'),
          setTheme: (name) => {
            document.body.classList.add(name === 'light' ? 'light' : 'dark')
            document.body.classList.remove(name === 'light' ? 'dark' : 'light')
            localStorage.setItem('theme', name)
            window.site.theme = name
            window.site.refreshThemeSwitch()
          },
          refreshThemeSwitch: () => {
            const isLight = window.site.theme === 'light'
            const themeSwitch = document.querySelector('[data-theme-switch]')

            themeSwitch?.setAttribute(
              'aria-label',
              isLight ? 'Switch to dark mode' : 'Switch to light mode'
            )
            themeSwitch?.setAttribute('aria-checked', isLight ? 'false' : 'true')
          },
        }

        window.site.setTheme(window.site.theme)
      })()
    </script>

    <button
      aria-label="Switch to light mode"
      aria-checked="true"
      data-theme-switch
      role="switch"
      type="button"
      class="appearance-none flex items-center justify-center bg-[var(--btnBgColor)] border border-[var(--btnBgColor)] text-[var(--btnTextColor)] rounded-[20px] px-2 py-[0.1em] outline-offset-[0.1em] absolute right-4 top-4"
    >
      <span aria-hidden="true" data-theme-switch-icon="dark">üåô</span>
      <span aria-hidden="true" data-theme-switch-icon="light">üåû</span>
    </button>

    <nav class="my-6 py-2">
  <div class="relative mx-auto md:w-[600px] w-auto px-[1.3125rem] md:px-0" data-nav-wrap>
    <a class="mr-5 absolute left-[-10000px] focus:static focus:left-auto" href="#content"
      >Skip to content</a
    >
    <a class="mr-5" href="/">Home</a>
    <a class="mr-5" href="https://github.com/sponsors/kutyel">Sponsor me</a>
    <a class="mr-5" href="/atom.xml">RSS</a>
  </div>
</nav>


<style>
  bsky-comments {
    --background-color: var(--bgColor);
    --text-color: var(--textColor);
    --link-color: var(--textLinkColor);
    --link-hover-color: var(--textLinkHoverColor);
    --comment-meta-color: #888;
    --error-color: #ff4d4d;
    --reply-border-color: var(--separatorColor);
    --button-background-color: var(--btnBgColor);
    --button-hover-background-color: rgba(var(--btnBgColor), 0.2);
    --author-avatar-border-radius: 50%;
  }
</style>

<main class="flex-1" id="content" tabindex="-1">
  <article class="pb-10">
    <header class="bg-[var(--headerBgColor)] mb-8 px-[1.3125rem] md:px-0 py-4 md:py-8">
      <div class="mx-auto md:w-[600px]">
        <h1 class="text-[1.7rem] md:text-[3rem] m-0 mb-4 font-normal leading-[1.2] text-[var(--h1Color)]">
          Building a non-trivial app with Elm and with Svelte
        </h1>
        <div class="mx-auto md:w-[600px]">
          <small class="italic">04/06/2025</small>
          <small class="italic"> | 11 min read</small>
          
          <div class="mt-2">[ <a title="All pages tagged &#39;frontend&#39;." href="/tags/frontend.html" rel="tag">frontend</a>, <a title="All pages tagged &#39;svelte&#39;." href="/tags/svelte.html" rel="tag">svelte</a>, <a title="All pages tagged &#39;elm&#39;." href="/tags/elm.html" rel="tag">elm</a>, <a title="All pages tagged &#39;fp&#39;." href="/tags/fp.html" rel="tag">fp</a>, <a title="All pages tagged &#39;web&#39;." href="/tags/web.html" rel="tag">web</a> ]</div>
        </div>
      </div>
    </header>
    <section class="mx-auto md:w-[600px] px-[1.3125rem] md:px-0"><p><img src="./images/elm-vs-svelte.png" alt="elm-vs-svelte" width="500px"></p>
<h2 id="motivation">Motivation</h2>
<p>I recently started to volunteer by contributing to a Svelte + TypeScript codebase, and since I‚Äôm completely new to Svelte, I wanted to build something in my spare time with Svelte 5 to test it out and see how it differs from my previous frontend experiences. On my dev job I do mostly Haskell backend code nowadays but I‚Äôve been a frontend engineer for years, and used everything in production: Backbone, React, Angular, Vue and Elm, which I‚Äôve been happily using for the last +5 years! üå≥</p>
<h2 id="first-impressions">First impressions</h2>
<p>I think Svelte lives up to its hype, I started to learn it by just using their tutorial in the <a href="https://svelte.dev/tutorial/svelte/welcome-to-svelte">Svelte website</a>, and in a matter of only <strong>10 hours of work</strong>, I was able to reproduce a fully fledged Svelte app, with Firebase and authentication just like the one I built in Elm for my personal use 3 years ago!</p>
<p>This means two things:</p>
<ol>
<li>Svelte is incredibly easy to learn! üíÉüèª</li>
<li>Svelte feels like just building HTML apps, but with magical bits ‚ú®</li>
</ol>
<blockquote>
<p>I can‚Äôt state how happy I am of not having to type <code>className</code> ever again! üòÖ</p>
</blockquote>
<p>For comparison, the Elm app currently has ~900 LOC, whereas the Svelte app has <em>exactly</em> 187 LOC ü§Ø, divided into 120 LOC of TypeScript and 67 LOC of template (Svelte HTML). This feels amazing, but is it really a fair comparison? No, and that is why in the following sections of the blogpost I am going to describe the pros and cons of both implementations!</p>
<h2 id="firebase">Firebase</h2>
<p>My original app was just a simple calendar view in which I could mark how many chapters of a book I read a single day, so that I could build a habit to read every day. I wanted my app to live on the Cloud and to be purely frontend based. I also did not want to handle authentication, etc, so I decided to use Firebase and also try out its realtime databases.</p>
<p>For Elm, I used the <a href="https://package.elm-lang.org/packages/IzumiSy/elm-firestore/latest/Firestore">elm-firestore</a> library, which is just amazing and let‚Äôs me write completely TYPE SAFE Elm queries to interact with Firestore, here is an example of such a query:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">let</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">query</span> : <span class="dt">Query</span><span class="op">.</span><span class="dt">Query</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">query</span> <span class="op">=</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>        <span class="dt">Query</span><span class="op">.</span><span class="fu">new</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>            <span class="op">|&gt;</span> <span class="dt">Query</span><span class="op">.</span><span class="fu">collection</span> <span class="st">&quot;readings&quot;</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>            <span class="op">|&gt;</span> <span class="dt">Query</span><span class="op">.</span><span class="fu">orderBy</span> <span class="st">&quot;date&quot;</span> <span class="dt">Query</span><span class="op">.</span><span class="dt">Descending</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>            <span class="op">|&gt;</span> <span class="dt">Query</span><span class="op">.</span><span class="fu">where_</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>                (<span class="dt">Query</span><span class="op">.</span><span class="fu">compositeFilter</span> <span class="dt">Query</span><span class="op">.</span><span class="dt">And</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>                    (<span class="dt">Query</span><span class="op">.</span><span class="fu">fieldFilter</span> <span class="st">&quot;date&quot;</span> <span class="dt">Query</span><span class="op">.</span><span class="dt">GreaterThanOrEqual</span> (<span class="dt">Query</span><span class="op">.</span><span class="fu">timestamp</span> <span class="op">&lt;|</span> <span class="fu">firstDayOfYear</span> <span class="fu">model</span><span class="op">.</span><span class="fu">displayYear</span>))</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>                    [ <span class="dt">Query</span><span class="op">.</span><span class="fu">fieldFilter</span> <span class="st">&quot;date&quot;</span> <span class="dt">Query</span><span class="op">.</span><span class="dt">LessThanOrEqual</span> (<span class="dt">Query</span><span class="op">.</span><span class="fu">timestamp</span> <span class="op">&lt;|</span> <span class="fu">lastDayOfYear</span> <span class="fu">model</span><span class="op">.</span><span class="fu">displayYear</span>) ]</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>                )</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="kw">in</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">model</span><span class="op">.</span><span class="fu">firestore</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="dt">Firestore</span><span class="op">.</span><span class="fu">root</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="dt">Firestore</span><span class="op">.</span><span class="fu">collection</span> <span class="st">&quot;users&quot;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="dt">Firestore</span><span class="op">.</span><span class="fu">document</span> <span class="fu">uid</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="dt">Firestore</span><span class="op">.</span><span class="fu">build</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="dt">Result</span><span class="op">.</span><span class="fu">toTask</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="dt">Task</span><span class="op">.</span><span class="fu">andThen</span> (<span class="dt">Firestore</span><span class="op">.</span><span class="fu">runQuery</span> <span class="fu">decoder</span> <span class="fu">query</span>)</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">|&gt;</span> <span class="dt">Task</span><span class="op">.</span><span class="fu">attempt</span> <span class="dt">FetchChapters</span></span></code></pre></div>
<p>Working with this library is amazing and using all the power of Elm and its famous compiler error messages, it was a delight to interact with Firestore (Firebase‚Äôs document storage) in such a way. A huge part of those extra FEW hundred lines of code was needed to Decode and Encode data from/to JSON, this is a price we have to pay in Elm to be completely <strong>pure and type safe</strong> but I believe in the long run it is completely worth it.</p>
<p>However, the sad part is that since this library uses Firestore RESTful API, which is officially said to be out of support for realtime update, I could not leverage this functionality in my Elm application. üò¢</p>
<p>For Svelte, I used the <a href="https://svelte-firebase-state.vercel.app/firestore/collection-state">svelte-firebase-state</a> package, and I was really impressed with it. Have a look at exactly the same query I showed you above, but in Svelte:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> readings <span class="op">=</span> <span class="kw">new</span> <span class="fu">CollectionState</span><span class="op">&lt;</span>DocumentData<span class="op">,</span> Reading<span class="op">&gt;</span>({</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  auth<span class="op">,</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  firestore<span class="op">,</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  listen<span class="op">:</span> <span class="kw">true</span><span class="op">,</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  query<span class="op">:</span> () <span class="kw">=&gt;</span> [</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">where</span>(<span class="st">&#39;date&#39;</span><span class="op">,</span> <span class="st">&#39;&lt;=&#39;</span><span class="op">,</span> <span class="fu">subHours</span>(<span class="kw">new</span> <span class="fu">UTCDate</span>(selectedYear <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>)<span class="op">,</span> <span class="dv">1</span>))<span class="op">,</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">where</span>(<span class="st">&#39;date&#39;</span><span class="op">,</span> <span class="st">&#39;&gt;=&#39;</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">UTCDate</span>(selectedYear<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">1</span>))<span class="op">,</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  ]<span class="op">,</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  path<span class="op">:</span> (currentUser) <span class="kw">=&gt;</span> <span class="vs">`users/</span><span class="sc">${</span>currentUser<span class="op">?.</span><span class="at">uid</span><span class="sc">}</span><span class="vs">/readings`</span><span class="op">,</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>What is amazing about this is that it brings with it a new reactivity model that you need to get used to, it feels intuitive and easy but you need to be aware of some footguns. For example, if I wanted to use the last read chapter as a selection for the <code>&lt;select&gt;</code> elements I had on the page, I needed to use the new <code>$effect</code> rune from Svelte 5:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">$effect</span>(() <span class="kw">=&gt;</span> {</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> lastRead <span class="op">=</span> readings<span class="op">?.</span><span class="at">data</span><span class="op">?.</span><span class="fu">at</span>(<span class="op">-</span><span class="dv">1</span>)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (lastRead) {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    selectedBook <span class="op">=</span> lastRead<span class="op">.</span><span class="at">book</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    selectedChapter <span class="op">=</span> lastRead<span class="op">.</span><span class="at">chapter</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>This is not bad per se but I know that state and derived state can go out of hand REALLY quickly, that is why I value <strong>The Elm Architecture</strong> (TEA, for short) so much, because it makes you reason about you application code and your data in a simpler, completely different way!</p>
<h2 id="elm-ui-vs-tailwindcss">elm-ui vs.¬†Tailwindcss</h2>
<p>This section is a bit offtopic, because I love Tailwind CSS, but I also love <a href="https://package.elm-lang.org/packages/mdgriffith/elm-ui/latest/"><strong>elm-ui</strong></a>. In both applications, <em>I did not write a single line of CSS</em>, and both look great!</p>
<p>If you don‚Äôt know about <code>elm-ui</code>, I created an <a href="https://egghead.io/courses/declarative-uis-without-css-with-elm-ui-93bd?af=e68v38">Egghead tutorial</a> about it, it is an incredible way to create styles in a declarative and idiomatic way within Elm, but that it does not force you to know/understand all the ins and outs of CSS. I thoroughly recommend it! üíÖüèª</p>
<p>For example, here is how simple it was to have a responsive view with elm-ui:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> ( <span class="fu">device</span><span class="op">.</span><span class="fu">class</span><span class="op">,</span> <span class="fu">device</span><span class="op">.</span><span class="fu">orientation</span> ) <span class="cf">of</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>    ( <span class="dt">Phone</span><span class="op">,</span> <span class="dt">Portrait</span> ) <span class="op">-&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">column</span> [ <span class="fu">width</span> <span class="fu">fill</span><span class="op">,</span> <span class="fu">centerY</span><span class="op">,</span> <span class="fu">spacing</span> <span class="dv">10</span> ]</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>            [ <span class="fu">row</span> [ <span class="fu">spacing</span> <span class="dv">10</span><span class="op">,</span> <span class="fu">centerX</span> ] [ <span class="fu">small</span> <span class="fu">userEmail</span><span class="op">,</span> <span class="fu">viewYears</span><span class="op">,</span> <span class="fu">logOut</span> ]</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">row</span> [ <span class="fu">spacing</span> <span class="dv">10</span><span class="op">,</span> <span class="fu">centerX</span> ] [ <span class="fu">viewBookSelect</span><span class="op">,</span> <span class="fu">viewChapterSelect</span> ]</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">row</span> [ <span class="fu">spacing</span> <span class="dv">10</span><span class="op">,</span> <span class="fu">centerX</span> ] [ <span class="fu">viewDatePicker</span><span class="op">,</span> <span class="fu">viewBtn</span> ]</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>            <span class="op">,</span> <span class="fu">el</span> [ <span class="fu">centerX</span><span class="op">,</span> <span class="fu">width</span> (<span class="fu">px</span> <span class="dv">400</span>)<span class="op">,</span> <span class="fu">height</span> (<span class="fu">px</span> <span class="dv">200</span>)<span class="op">,</span> <span class="fu">scrollbarX</span> ] <span class="fu">node</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>            ]</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="fu">_</span> <span class="op">-&gt;</span> <span class="co">-- other views</span></span></code></pre></div>
<p>At work, we use Tailwind CSS with Elm, and for this Svelte app, I decided to use <a href="https://svelte.dev/tutorial/kit/introducing-sveltekit">SvelteKit</a>, since it seems to be the standard for building Svelte apps, and its Tailwind CSS support is amazing, I had to do very little tweaking to have it working, JavaScript tooling has really improved in the last years! üôåüèª</p>
<h2 id="elm-charts-vs-google-web-components">elm-charts vs.¬†google-web-components</h2>
<p>The crown jewel of this small application is, without a doubt, it‚Äôs calendar component. On its original version, I also decided to use the <a href="https://www.webcomponents.org/element/@google-web-components/google-chart">Google Calendar web component</a> for simplicity, since I wanted to see little squares for each day I read, just like we do in our Github contributions graph. Here‚Äôs how it looks:</p>
<p><img src="./images/google-chart.png" alt="google-chart" width="650px"></p>
<p>Even though Svelte has excellent support for Web Components, I stumbled upon a very weird and not very well documented issue, you need this code to make pretty much any Web Component to work within Svelte:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">onMount</span>(<span class="kw">async</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="cf">await</span> <span class="im">import</span>(<span class="st">&#39;@google-web-components/google-chart&#39;</span>)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>})</span></code></pre></div>
<p>That took a shameful amount of time to figure out and I felt really stupid. üò¢</p>
<p>Elm <em>also</em> has excellent support for Web Components, but after Google breaking its library a few times while updating dependencies (I know, right üòÖ), I decided for the Elm app to get rid of it and try out <a href="https://www.elm-charts.org/">elm-charts</a> instead.</p>
<p>This is also not a fair comparison, and a few extra hundred of lines of Elm code come by building the calendar chart by hand, similar to a heatmap. <a href="https://www.elm-charts.org/">elm-charts</a> is like the analog of D3.js but for Elm, it is a beautiful library and very potent! üöÄ</p>
<p>Here is what the end result looked like:</p>
<p><img src="./images/elm-chart.png" alt="elm-chart" width="650px"></p>
<p>As you can see, it looks pretty similar, but you have <em>fine grained</em> control about everything, for example, I was able to display the days of the week <strong>from Monday to Sunday</strong>, something currently the Google Calendar chart does not allow you to do. üìÜ</p>
<p>The simplicity of the Svelte code here is very nice:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>  {#if readings<span class="op">.</span><span class="at">loading</span>}</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;Loading</span> <span class="fu">/&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  {<span class="op">:</span><span class="cf">else</span>}</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;div</span> <span class="ot">class</span><span class="op">=</span><span class="st">&quot;flex flex-row flex-nowrap overflow-x-scroll&quot;</span><span class="kw">&gt;</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>      <span class="fu">&lt;google-chart</span> <span class="ot">type</span><span class="op">=</span><span class="st">&quot;calendar&quot;</span> <span class="va">{</span>options<span class="va">}</span> <span class="va">{</span>data<span class="va">}</span><span class="fu">&gt;&lt;/google-chart&gt;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>    <span class="kw">&lt;/div&gt;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  {<span class="ss">/if}</span></span></code></pre></div>
<p>Although I‚Äôm not a big fan of templating (I still have nightmares with Angular ü§Æ), I have to recognise that Svelte seems to have picked up the best parts of Vue, React and other frontend frameworks and it feels really simple and elegant to build your views like this (as opposed to JSX, which also took its time to be loved üíî).</p>
<h2 id="javascripts-standard-library">JavaScript‚Äôs ‚Äústandard‚Äù library</h2>
<p>It has been a while ago since the last time I had to write new JavaScript or TypeScript code, so I was really hoping some problems with the language itself would be a thing of the past, for example, here is how I conditionally render the chapter selector each time you pick a book in the UI in Elm:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span> [ <span class="fu">onInput</span> <span class="op">&lt;|</span> <span class="dt">SelectChapter</span> <span class="op">&lt;&lt;</span> <span class="dt">Maybe</span><span class="op">.</span><span class="fu">withDefault</span> <span class="dv">0</span> <span class="op">&lt;&lt;</span> <span class="dt">String</span><span class="op">.</span><span class="fu">toInt</span> ] <span class="op">&lt;|</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">List</span><span class="op">.</span><span class="fu">map</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        (\<span class="fu">chapter</span> <span class="op">-&gt;</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">option</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>              [ <span class="dt">Html</span><span class="op">.</span><span class="dt">Attrs</span><span class="op">.</span><span class="fu">selected</span> <span class="op">&lt;|</span> <span class="fu">chapter</span> <span class="op">==</span> <span class="fu">selectedChapter</span> ]</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>              [ <span class="dt">Html</span><span class="op">.</span><span class="fu">text</span> <span class="op">&lt;|</span> <span class="fu">fromInt</span> <span class="fu">chapter</span> ]</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>        (<span class="dt">List</span><span class="op">.</span><span class="fu">range</span> <span class="dv">1</span> <span class="op">&lt;|</span> <span class="fu">getNumChapters</span> <span class="fu">selectedBook</span>)</span></code></pre></div>
<p>You might not be very familiar with this syntax, but once you get used to it, it is quite straightforward. Did you notice the use of <code>List.range</code>? üëÄ</p>
<p>When translating this code to TypeScript, I COULD NOT BELIEVE it is 2025 already and JavaScript still <strong>does not have</strong> a built in <code>range</code> function‚Ä¶ I mean‚Ä¶ come on! Yes, we have some sort of proposal to bring <a href="https://github.com/tc39/proposal-iterator.range"><code>Iterator.range</code> in Stage 2</a>, but very far away from being able to use it natively! ü•π I had to use <code>core-js</code> and <em>manually patch TypeScript</em> üíÄ to be able to use it in the Svelte app, and the result was not pretty‚Ä¶</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode jsx"><code class="sourceCode javascriptreact"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">&lt;Select</span> <span class="ot">labelText</span><span class="op">=</span><span class="st">&quot;Year&quot;</span> <span class="ot">bind:selected</span><span class="op">=</span><span class="va">{</span>selectedYear<span class="va">}</span> <span class="ot">onchange</span><span class="op">=</span><span class="va">{</span>onChangeYear<span class="va">}</span><span class="fu">&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="va">{</span>#each Iterator<span class="op">.</span><span class="fu">range</span>(<span class="dv">2020</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">UTCDate</span>()<span class="op">.</span><span class="fu">getFullYear</span>()<span class="op">,</span> { <span class="dt">inclusive</span><span class="op">:</span> <span class="kw">true</span> }) <span class="im">as</span> value<span class="va">}</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">&lt;SelectItem</span> <span class="va">{</span>value<span class="va">}</span> <span class="fu">/&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="va">{</span><span class="ss">/each}</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="ss">&lt;/Select</span><span class="op">&gt;</span></span></code></pre></div>
<p>The API is far from perfect, but it was not as annoying as having to deal with <strong>Dates</strong> in JavaScript again‚Ä¶ In Elm, all dates are <code>UTC</code>, and since it is a language that compiles down to JS, its API for working with <code>Date</code> and time is much nicer than JavaScript‚Äôs, have a look at the Svelte code:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">const</span> readingsData <span class="op">=</span> <span class="fu">$derived</span>(</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  readings<span class="op">?.</span><span class="at">data</span><span class="op">?.</span><span class="fu">map</span>(({ date<span class="op">,</span> book<span class="op">,</span> chapter }) <span class="kw">=&gt;</span> {</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> d <span class="op">=</span> <span class="fu">toDate</span>(date<span class="op">.</span><span class="fu">toDate</span>()<span class="op">,</span> utc) <span class="co">// convert to UTC</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> [</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>      d<span class="op">,</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>      <span class="dv">1</span><span class="op">,</span> <span class="co">// the below snippet builds the tooltip for the calendar chart</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>      <span class="vs">`&lt;div style=&quot;font-size: 1rem;padding: 0.75rem;&quot;&gt;</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="vs">        </span><span class="sc">${</span><span class="fu">format</span>(d<span class="op">,</span> <span class="st">&#39;MMMM d, yyyy&#39;</span>)<span class="sc">}</span><span class="vs">: &lt;strong&gt;</span><span class="sc">${</span>book<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>chapter<span class="sc">}</span><span class="vs">&lt;/strong&gt;</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;/div&gt;`</span><span class="op">,</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>I had to rely on not one, but <strong>TWO JS libraries</strong> to format the dates properly and also maintain the coherence of the UTC dates, the two being the indispensable <code>date-fns</code> and also in this case <code>@date-fns/utc</code>.</p>
<p>I know there is a brighter future ahead with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Temporal">Temporal API</a> and such, but I wish we had improved more here on the JavaScript side‚Ä¶</p>
<h2 id="type-safety">Type safety</h2>
<p>Ok so, Svelte is pretty great‚Ä¶ but, what is my main complaint? <strong>TypeScript</strong> üòÅ (please bear with me haha). The following code in the application is valid and it actually works:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode typescript"><code class="sourceCode typescript"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">handleRead</span>() {</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  readingId <span class="op">=</span> <span class="cf">await</span> readings<span class="op">.</span><span class="fu">add</span>({</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    book<span class="op">:</span> selectedBook<span class="op">,</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    chapter<span class="op">:</span> selectedChapter<span class="op">,</span></span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    date<span class="op">:</span> Timestamp<span class="op">.</span><span class="fu">fromDate</span>(selectedDate)<span class="op">,</span></span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  })</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Besides having to mutate <code>$state</code> data etc, which I can bear, where is the error handling? <strong>Nothing</strong> prevented me from writing (and shipping to production!) such code, because it is on YOU, the developer, the responsibility for error handling and making sure things don‚Äôt break. For example, wrapping async code in <code>try { ... } catch { ... } finally { ... }</code> blocks, etc‚Ä¶</p>
<p>Besides, even when TypeScript is able to infer correctly sometimes the types in the application, it can be completely overriden by the developer with <code>as</code> manual castings, etc. Such escape hatches simply DO NOT EXIST in Elm. Elm is a language with <a href="https://www.epicweb.dev/talks/hindley-and-milner-walk-into-a-bar">Hindley-Milner type inference</a> and as such, is far superior to TypeScript. Bear in mind that the <a href="https://softwareengineering.stackexchange.com/questions/337295/what-is-the-benefit-of-having-no-runtime-errors-like-elm-claims">‚Äúno runtime errors‚Äù philosophy</a> of Elm is for me still one of its strongest selling points. üí™üèª</p>
<p>Have a look at the following Elm code from the app:</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="fu">readings</span> <span class="cf">of</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="dt">NotAsked</span> <span class="op">-&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>        <span class="fu">el</span> [ <span class="fu">centerY</span><span class="op">,</span> <span class="fu">centerX</span> ] <span class="op">&lt;|</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>            <span class="fu">button</span> <span class="fu">btns</span> { <span class="fu">label</span> <span class="op">=</span> <span class="fu">text</span> <span class="st">&quot;GOOGLE SIGN IN&quot;</span><span class="op">,</span> <span class="fu">onPress</span> <span class="op">=</span> <span class="dt">Just</span> <span class="dt">LogIn</span> }</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">Failure</span> <span class="fu">message</span> <span class="op">-&gt;</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">el</span> [ <span class="fu">centerY</span><span class="op">,</span> <span class="fu">centerX</span><span class="op">,</span> <span class="dt">Font</span><span class="op">.</span><span class="fu">color</span> <span class="op">&lt;|</span> <span class="fu">rgb255</span> <span class="dv">255</span> <span class="dv">0</span> <span class="dv">0</span> ] <span class="op">&lt;|</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">text</span> (<span class="fu">httpErrorToString</span> <span class="fu">message</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">Loading</span> <span class="op">-&gt;</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>        <span class="dt">Loading</span><span class="op">.</span><span class="fu">render</span> <span class="dt">Spinner</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">-- rest of the code</span></span></code></pre></div>
<p>Besides having awesome pattern-matching super powers, every single type that is returned from an Elm library, is going to be a <code>Maybe</code>, a <code>Result</code> type, or some other type that we are going to forcefully have to UNWRAP ourselves to make sure it works, <strong>error handling is enforced by the compiler!</strong> ü§ñ</p>
<p>The Model-View-Update followed by TEA needs some time to wrap our head around it, but basically, when I get back from my <code>ReadChapter</code> message, I need to pattern match on it:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode elm"><code class="sourceCode elm"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="dt">ReadChapter</span> (<span class="dt">Ok</span> <span class="fu">chapter</span>) <span class="op">-&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- if we succeed reading a chapter we just append it to the beginning of the list</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>    ( { <span class="fu">model</span> <span class="op">|</span> <span class="fu">readings</span> <span class="op">=</span> <span class="dt">RemoteData</span><span class="op">.</span><span class="fu">map</span> ((<span class="op">::</span>) <span class="fu">chapter</span>) <span class="fu">model</span><span class="op">.</span><span class="fu">readings</span> }<span class="op">,</span> <span class="dt">Cmd</span><span class="op">.</span><span class="fu">none</span> )</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="dt">ReadChapter</span> (<span class="dt">Err</span> <span class="fu">_</span>) <span class="op">-&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">-- in this particular case, I know a failure is due to trying to record the same reading twice</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>    ( { <span class="fu">model</span> <span class="op">|</span> <span class="fu">readings</span> <span class="op">=</span> <span class="dt">Failure</span> <span class="op">&lt;|</span> <span class="dt">BadBody</span> <span class="st">&quot;You tried recording the same reading twice, refresh the page!&quot;</span> }<span class="op">,</span> <span class="dt">Cmd</span><span class="op">.</span><span class="fu">none</span> )</span></code></pre></div>
<p>And therefore I always need to handle explicity what happens, not only in the happy path (as shown in the TypeScript/Svelte snippet above), but also <strong>ALL possible states/scenarios when things go wrong.</strong></p>
<blockquote>
<p>Elm‚Äôs philosophy truly helps you make impossible states actually impossible!</p>
</blockquote>
<h2 id="conclusion">Conclusion</h2>
<p>I have to say, Svelte has sparkled back in me the excitement for web development, this is very important for me and it has been years since the last time I felt this joy, probably the last time I felt it was when learning Elm a few years ago. üéâ</p>
<p>If I had to choose a JavaScript/TypeScript frontend framework for my next app, I would <strong>probably never use React again</strong> (and this is huge!) and pick Svelte instead. However, as mentioned in the previous section, TypeScript is still MILES behind from the type safety of Elm. Therefore, even despite the verbosity of the code, if I REALLY cared about the correctness and maintainability of the application I am going to write, and I want to sleep well at night rest assured that nothing is going to blow up, <strong>I would still pick Elm for my frontend development</strong>.</p>
<p>Obviously, both Elm and Svelte have their tradeoffs (for example, Elm‚Äôs foreign function interface with JavaScript is <em>very</em> limited) but I hope I have presented them objectively enough in this post and that you enjoyed it!</p>
<p>If you found joy in this blogpost, share it in your social networks and <strong>follow me on <a href="https://twitter.com/FlavioCorpa">Twitter</a></strong> and <a href="https://bsky.app/profile/flaviocorpa.com">BlueSky</a>! ü¶ã</p></section>
  </article>
</main>


<bsky-comments post="at://did:plc:dvrocvv5szl2evqiafsx4iyw/app.bsky.feed.post/3lpuiptgukc2m"></bsky-comments>
 <footer class="py-14 bg-[var(--footerBgColor)] shrink-0">
  <div class="relative mx-auto md:w-[600px] w-auto px-[1.3125rem]">
    <ul class="flex justify-center list-none" role="list">
      <li class="mx-3" role="listitem">
        <a href="/">Home</a>
      </li>
      <li class="mx-3" role="listitem">
        <a href="https://github.com/sponsors/kutyel/">Sponsor me</a>
      </li>
      <li class="mx-3" role="listitem">
        <a href="/atom.xml">RSS</a>
      </li>
    </ul>
  </div>
</footer>


<script src="https://gistcdn.githack.com/kutyel/41d12e099484fd390fb67168271fcdd9/raw/9be26e500525a2e4edacc53d3a8006aaddec0e15/bsky-comments.js"></script>


    <script async>
      ;(() => {
        window.site.refreshThemeSwitch()
        document.querySelector('[data-theme-switch]').addEventListener('click', (e) => {
          window.site.setTheme(window.site.theme === 'light' ? 'dark' : 'light')
        })
      })()
    </script>

    <!-- Cloudflare Web Analytics -->
    <script
      defer
      src="https://static.cloudflareinsights.com/beacon.min.js"
      data-cf-beacon='{"token": "28e4db2ab9bd4b7a802cf68450728e6b"}'
    ></script>
    <!-- End Cloudflare Web Analytics -->
  </body>
</html>
